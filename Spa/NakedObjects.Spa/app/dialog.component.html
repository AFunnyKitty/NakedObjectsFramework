<div *ngIf="dialog" class="dialog">
    <div class="title">
        {{dialog.title}}
    </div>
    <form>
        <div class="parameters">
            <div class="parameter" *ngFor="let parameter of dialog.parameters" [ngSwitch]="parameter.type">
                <div class="name">
                    <label attr.for="{{parameter.paneArgId}}">{{parameter.title}}</label>
                </div>
                <div *ngSwitchCase="'ref'">

                    <div class="value input-control text" [ngSwitch]="parameter.entryType">
                        <!--<input type="hidden" value="{{parameter.reference}}" [(ngModel)]="parameter.reference" />-->
                        <!--"EntryType.AutoComplete"-->
                        <div *ngSwitchCase="5">
                            <!--<input id="{{parameter.paneArgId}}" class="{{parameter.status}} value droppable" [ngClass]="parameter.color" placeholder="{{parameter.description}}" type="text" [(ngModel)]="parameter.selectedChoice" name="parameter.id" [geminiDrop]="parameter" [geminiAutocomplete]="parameter" [parent]="dialog" gemini-fieldmandatorycheck gemini-clear />-->
                            <autocomplete [viewModel]="parameter" [parent]="dialog"></autocomplete>

                        </div>

                        <!--"EntryType.MultipleConditionalChoices"-->
                        <div *ngSwitchCase="4">
                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" multiple [(ngModel)]="parameter.selectedMultiChoices" name="parameter.id" [geminiConditionalChoices]="parameter" [parent]="dialog" [fieldChanged]="parameterChanged$" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>

                        <!--"EntryType.ConditionalChoices"-->
                        <div *ngSwitchCase="3">
                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" [(ngModel)]="parameter.selectedChoice" name="parameter.id" [geminiConditionalChoices]="parameter" [parent]="dialog" [fieldChanged]="parameterChanged$" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>

                        <!--"EntryType.MultipleChoices"-->
                        <div *ngSwitchCase="2">
                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" multiple [(ngModel)]="parameter.selectedMultiChoices" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>

                        <!--"EntryType.Choices"-->
                        <div *ngSwitchCase="1">
                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" [(ngModel)]="parameter.selectedChoice" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>

                        <!--"EntryType.FreeForm"-->
                        <div *ngSwitchCase="0">
                            <div tabindex="0" class="value droppable" [ngClass]="parameter.color" dnd-droppable (onDropSuccess)="parameter.drop($event.dragData)"   gemini-fieldmandatorycheck gemini-clear>
                                {{parameter.value || parameter.description}}
                            </div>
                        </div>

                    </div>
                </div>

                <div *ngSwitchCase="'scalar'">
                    <div class="value input-control text" [ngSwitch]="parameter.entryType">

                        <!--"EntryType.File"-->
                        <div *ngSwitchCase="6">
                            <!--    <input id="{{parameter.paneArgId}}" type="file" class="{{parameter.status}}" [(ngModel)]="$parent.parameter.file"  name="parameter.id"  placeholder="{{parameter.description}}" gemini-fileupload />-->
                        </div>

                        <!--"EntryType.AutoComplete"-->
                        <div *ngSwitchCase="5">
                            <!--<input id="{{parameter.paneArgId}}" class="{{parameter.status}}" placeholder="{{parameter.description}}" type="text" [(ngModel)]="parameter.selectedChoice" [geminiAutocomplete]="parameter" [parent]="dialog" gemini-fieldmandatorycheck gemini-clear />-->
                            <autocomplete [viewModel]="parameter" [parent]="dialog"></autocomplete>

                        </div>

                        <!--"EntryType.MultipleConditionalChoices"-->
                        <div *ngSwitchCase="4">

                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" multiple [(ngModel)]="parameter.selectedMultiChoices" name="parameter.id" [geminiConditionalChoices]="parameter" [parent]="dialog" [fieldChanged]="parameterChanged$" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>

                        <!--"EntryType.ConditionalChoices"-->
                        <div *ngSwitchCase="3">
                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" [(ngModel)]="parameter.selectedChoice" name="parameter.id" [geminiConditionalChoices]="parameter" [parent]="dialog" [fieldChanged]="parameterChanged$" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>


                        <!--"EntryType.MultipleChoices"-->
                        <div *ngSwitchCase="2">
                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" multiple [(ngModel)]="parameter.selectedMultiChoices" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>

                        <!--"EntryType.Choices"-->
                        <div *ngSwitchCase="1">
                            <select id="{{parameter.paneArgId}}" class="{{parameter.status}}" [(ngModel)]="parameter.selectedChoice" name="parameter.id" (change)="parameterChanged()" (ngModelChange)="parameterChanged()" gemini-fieldmandatorycheck>
                                <option value="" disabled>{{parameter.description}}</option>
                                <option *ngFor="let choice of parameter.choices" [ngValue]="choice">{{choice.name}}</option>
                            </select>
                        </div>

                        <!--"EntryType.FreeForm"-->
                        <div *ngSwitchCase="0">
                            <div [ngSwitch]="parameter.returnType">
                                <div *ngSwitchCase="'string'" [ngSwitch]="parameter.format">
                                    <div *ngSwitchCase="'date'">
                                        <input id="{{parameter.paneArgId}}" class="{{parameter.status}}" type="date" placeholder="{{parameter.description}}" [(ngModel)]="parameter.value" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-datepicker gemini-fieldvalidate gemini-clear />
                                    </div>
                                    <div *ngSwitchCase="'time'">
                                        <input id="{{parameter.paneArgId}}" class="{{parameter.status}}" type="time" placeholder="{{parameter.description}}" [(ngModel)]="parameter.value" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-timepicker gemini-fieldvalidate gemini-clear />
                                    </div>
                                    <div *ngSwitchDefault [ngSwitch]="parameter.multipleLines">
                                        <input *ngSwitchCase="1" id="{{parameter.paneArgId}}" class="{{parameter.status}}" placeholder="{{parameter.description}}" type="{{parameter.password ? 'password' : 'text'}}" [(ngModel)]="parameter.value" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-fieldvalidate gemini-clear />
                                        <textarea *ngSwitchDefault rows="{{$parent.parameter.multipleLines}}" id="{{$parent.parameter.paneArgId}}" class="{{$parent.parameter.status}}" [(ngModel)]="parameter.value" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-fieldvalidate placeholder="{{parameter.description}}"></textarea>
                                    </div>
                                </div>
                                <div *ngSwitchCase="'boolean'">
                                    <input id="{{parameter.paneArgId}}" class="{{parameter.status}}" type="checkbox" [geminiBoolean]="parameter" (ngModelChange)="parameterChanged()" />{{parameter.description}}
                                </div>
                                <div *ngSwitchDefault>
                                    <input id="{{parameter.paneArgId}}" class="{{parameter.status}}" type="text" placeholder="{{parameter.description}}" [(ngModel)]="parameter.value" name="parameter.id" (ngModelChange)="parameterChanged()" gemini-fieldvalidate gemini-clear />
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="validation">{{parameter.message}}</div>
            </div>
            <div class="co-validation">{{dialog.message}}</div>
        </div>
        <input class="ok" tabindex="0" type="submit" value="OK" title="{{dialog.tooltip()}}" [disabled]="!dialog.clientValid()" geminiClick (leftClick)="dialog.doInvoke()" (rightclick)="dialog.doInvoke(true)" />
        <input class="cancel" tabindex="0" type="button" geminiClick (leftClick)="dialog.doCloseReplaceHistory()" value="Cancel" />
    </form>
</div>

