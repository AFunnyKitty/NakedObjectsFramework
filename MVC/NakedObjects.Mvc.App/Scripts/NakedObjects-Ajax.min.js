var nakedObjects=function(){function t(){n.ajaxCount>0?n.ajaxCount--:n.ajaxCount=0}function g(n){var t,i,r="input[type='text'], input[type='checkbox'], select, textarea",u=".input-validation-error";n?(t=n.find(r).filter(":enabled").first(),i=n.find(u).filter(":enabled").first()):(t=$(r).filter(":enabled").first(),i=$(u).filter(":enabled").first());t.focus();i.focus()}function nt(){$(".nof-tab").mousedown(function(t){switch(t.which){case 3:n.closeHistoryMenus();var i=$(this);i.append("<ul><li><a href='#'>Close This<\/a><\/li><li><a href='#'>Close Others<\/a><\/li><li><a href='#'>Close All<\/a><\/li><\/ul>");i.find("ul").menu();i.find("li:eq(0) a").click(function(){i.find("button.nof-clear-item").click()});i.find("li:eq(1) a").click(function(){i.find("button.nof-clear-others").click()});i.find("li:eq(2) a").click(function(){i.find("button.nof-clear").click()});$(document).on("mousedown",function(t){return n.closeHistoryMenus(t,i)});return!1;default:return!0}})}function s(n){var t=$("form button.nof-lastClicked").get(0),i,r,u;return t||(i=$(n.target).closest("form"),r=i.find("button.nof-ok:first"),r.length>0?t=r.get(0):(u=i.find("button:submit[name='']:first"),u.length>0&&(t=u.get(0)))),t}function h(n,t){$(".main-content").append("<div id='_errorMessage' title='"+n+"'>"+t+"<\/div>");$("#_errorMessage").dialog({draggable:!0,height:"500",width:"1000",close:function(){$("#_errorMessage").remove()}})}function o(n){$(n).effect("highlight",{},500);e=$(":submit, this");e.attr("disabled","disabled");$("body").css("cursor","progress")}function r(){return e?(e.removeAttr("disabled"),$("body").css("cursor","auto"),e=null,!0):!1}function tt(){d=!0;$("a").css("cursor","progress")}function p(){return d?(d=null,$("a").css("cursor","pointer"),!0):!1}function it(){$("div.nof-collection-table button.nof-summary").show();$("div.nof-collection-table button.nof-list").show();$("div.nof-collection-table button.nof-table").hide();$("div.nof-collection-list button.nof-summary").show();$("div.nof-collection-list button.nof-list").hide();$("div.nof-collection-list button.nof-table").show();$("div.nof-collection-summary button.nof-summary").hide();$("div.nof-collection-summary button.nof-list").show();$("div.nof-collection-summary button.nof-table").show()}function rt(){$("div.nof-property > div.nof-object > a").closest("div.nof-property").find("> div.nof-object > form button.nof-minimize").hide();$("div.nof-property > div.nof-object > a").closest("div.nof-property").find("> div.nof-object > form button.nof-maximize").show();$("div.nof-property > div.nof-object > div.nof-propertylist").closest("div.nof-property").find("> div.nof-object > form button.nof-maximize").hide();$("div.nof-property > div.nof-object > div.nof-propertylist").closest("div.nof-property").find("> div.nof-object > form button.nof-minimize").show()}function gt(n,t,i){n.each(function(n,r){var u=$(r).attr(t);u&&$(r).attr(t,i+u)})}function ni(n){var t=n.split("-"),i=t.length;return t[i-2]+"-"+t[i-1]}function w(n,t){var i=$(n,t);return i.length>0?($(n).replaceWith(i),!0):!1}function st(){var n=$("div.popup-dialog"),t;n.length>0&&(t=n.attr("data-closing"),t&&n.dialog("close"))}function ht(t){if(t.closest(".nof-parameterlist").hasClass("nof-queryonly")){t.text(n.executeAndCloseButtonQueryOnlyText);t.attr("title",n.executeAndCloseButtonQueryOnlyText);var i=t.clone();i.removeClass("nof-ok");i.addClass("nof-apply");i.text(n.executeWithoutClosingButtonText);i.attr("title",n.executeWithoutClosingButtonText);t.after(i);i.click(function(){return i.closest("form").siblings("div.validation-summary-errors").remove(),i.closest("form").find("span.field-validation-error").remove(),!0})}else t.text(n.executeAndCloseButtonDefaultText),t.attr("title",n.executeAndCloseButtonDefaultText)}function ti(t,i){var f=$("div.validation-summary-errors",i),e=$("form.nof-dialog, form.nof-dialog-file",i),u=$("div.nof-actionname",i),r;t.attr("title",u.text());t.removeAttr("data-closing");t.find("div.validation-summary-errors").remove();t.find("form.nof-dialog, form.nof-dialog-file").remove();t.append(f);t.append(e);$(t).find(":input").each(n.updateChoices);$(".ui-dialog-titlebar span").text(u.text());r=$("div.popup-dialog button.nof-ok");ht(r);r.on("click",function(){t.attr("data-closing",!0)})}function ii(t){var i;if(n.usePopupDialogs){if(i=$("div.popup-dialog"),i.length===0){$("section.main-content").append("<div class='popup-dialog'><\/div>");i=$("div.popup-dialog");var r=$("form.nof-dialog, form.nof-dialog-file",t),u=$("div.nof-actionname",t),f=$("div.validation-summary-errors",t);i.attr("title",u.text());i.dialog({open:function(){i.append(f);i.append(r);var n=$("div.popup-dialog button.nof-ok");n.on("click",function(){i.attr("data-closing",!0)});ht(n)},close:function(){i.remove()},modal:!0,width:"auto",height:"auto"});$(i).find(":input").each(n.updateChoices)}else ti(i,t);return $.validator.unobtrusive.parse(i),!0}return!1}function i(t){if(!($("form.nof-dialog, form.nof-dialog-file",t).length>0)||!ii(t)){if(n.updateTitle(t),st(),w(".main-content",t)){$(".main-content").find(":input").each(n.updateChoices);return}if(w("body",t)){$("body").find(":input").each(n.updateChoices);return}h("Unhandled response",t)}}function ct(){if($("div.nof-objectedit").hasClass("nof-transient")){var n=$("div.nof-objectedit form.nof-edit").attr("action");if(n)return b(n)}return!1}function ri(){var t=n.getLinkFromHistory();$.address.value(t)}function ui(){var n=$.jStorage.get(v);n&&($.jStorage.deleteKey(n),$.jStorage.deleteKey(v))}function fi(){var n=$.jStorage.get(v),t;n&&(t=$.jStorage.get(n));$.jStorage.flush();t&&lt(n,t)}function lt(n,t){$.jStorage.set(v,n);$.jStorage.set(n,t)}function at(){var n=ct(),t,i;return n?(ui(),t="transient:"+n,i=$(".main-content").html(),lt(t,i),!0):!1}function ei(n){var i,t;for($("form div.nof-parameter:has(div.nof-object), form div.nof-property:has(div.nof-object)").each(function(n,t){$.jStorage.set(t.id,$(t).html())}),i={},t=0;t<n.length;t++)n[t].value.toLowerCase()==="false"&&i[n[t].name]||(i[n[t].name]=n[t].value);for(nv in i)$.jStorage.set(nv,i[nv])}function c(){$("div.nof-objectedit > form.nof-edit, form.nof-dialog, form.nof-dialog-file").each(function(){$(this).find("div.nof-parameter:has(div.nof-object), div.nof-property:has(div.nof-object)").each(function(n,t){var i=$.jStorage.get(t.id,null);i&&$(t).html(i)});$(this).find("input, select, textarea").each(function(n,t){var i=$.jStorage.get($(t).attr("name"),null);i&&($(t).attr("type")==="checkbox"?i.toLowerCase()==="true"?$(t).attr("checked","checked"):$(t).removeAttr("checked"):$(t).attr("type")==="hidden"&&!$(t).id||$(t).val(i))})})}function f(n){$("section#loginForm",n).length>0&&($.jStorage.flush(),window.location.reload(!0))}function b(n){var t=n.substring(n.indexOf("id=")+3);return unescape(t)}function k(t,i){$(t).attr("value",i);var r=$(t).attr("name");r.indexOf("-encryptedField-")===0&&(r=r.substring(16),$(t).attr("name",r));$(t).each(n.updateChoices)}function oi(i,r){var u=function(i,u){var f,e;return n.ajaxCount++,f={},f.autoCompleteParm=i.term,e=$(r).attr("data-completions"),$.ajaxSetup({cache:!1}),$.getJSON(e,f,function(n){u(n)}).always(function(){t()}),!0},f=function(n,t){var i,u;return $(r).parent(".nof-object").length>0&&(i=$(r).siblings("img"),i.length==0&&$(r).before($("<img/>")),$(r).siblings("img").attr("src",t.item.src),$(r).siblings("img").attr("alt",t.item.alt),u=$(r).siblings("input"),k(u,t.item.link)),y=n.keyCode&&n.keyCode===13,!0},e=function(){var n=$(this).val();n.length==0&&k($(this).siblings("input:last"),"")},o=$(r).attr("data-completions-minlength");$(r).autocomplete({autoFocus:!0,minLength:o,source:u,select:f});$(r).change(e)}function u(t){$("div.nof-history div.nof-object").draggable({helper:"clone",start:function(){var t=$(this);$(".ui-droppable").each(function(){n.isValid(t,$(this))})}});$("form div.nof-object").droppable({drop:function(n,t){var s=t.helper.find("a").attr("href"),h=b(s),f=$(this).find("a"),i=t.helper.find("a"),e=$(this).find("input[data-completions]"),r,u,o;f.length>0?f.replaceWith(i):e.length>0?$(e).attr("value",i.text()):$(this).prepend(i);r=$(this).find("img");u=t.helper.find("img");r.length>0?r.replaceWith(u):$(this).prepend(u);o=$(this).find("input:last");k(o,h)},deactivate:function(){$(".nof-validdrop").removeClass("nof-validdrop");$(".nof-withindrop").removeClass("nof-withindrop")},accept:function(){return $(this).hasClass("nof-validdrop")},hoverClass:"nof-withindrop"});n.focusOnFirst();t&&ri();$.validator.unobtrusive.parse($(".main-content"));$("input.datetime").removeClass("hasDatepicker");$("input.datetime").datepicker();$("input.datetime:focus").click(function(n){$(n).datepicker("show")});isNaN(new Date("29/10/2009").getTime())&&($.validator.methods.date=function(){return!0});$("input[data-completions]").each(oi);rt();it();nt();n.bindAjaxError()}function vt(r,e){var o,h,s;return(n.ajaxCount++,$.ajaxSetup({cache:!1}),o=r.attr("href"),n.cacheAllFormValues(),o.substring(0,14)==="/Transient?id="&&(h=unescape(o.substring(14)),s=$.jStorage.get("transient:"+h),s))?($(".main-content").html(s),c(),u(e),t(),!1):($.get(o,function(n){f(n);i(n);c();u(e)}).fail(function(n){var t=n.responseText;t&&i(t)}).always(function(){p();t()}),!1)}function yt(n){if(n.lengthComputable){var t=Math.round(n.loaded*100/n.total);$("#progressIndicator").progressbar({value:t})}}function si(n){i(n.target.responseText);u(!0);r()}function pt(n){i(n.target.responseText);u(!0);r()}function hi(n){i(n.target.responseText);u(!0);r();h("Timeout","File upload timedout")}function ci(n,t){var i=new XMLHttpRequest;i.upload.addEventListener("progress",yt,!1);i.addEventListener("load",si,!1);i.addEventListener("error",pt,!1);i.addEventListener("abort",pt,!1);i.addEventListener("timeout",hi,!1);i.open("POST",n);i.timeout=kt;i.send(t)}function ut(n){var r=n.target.getAllResponseHeaders(),t;/content-disposition:/i.exec(r)?ai(n):(t=new FileReader,t.onloadend=function(n){i(n.target.result);u(!0)},t.readAsText(n.target.response))}function li(n){st();ut(n)}function ft(n){i(n.target.responseText);u(!0)}function wt(n){var i=n.target.getAllResponseHeaders(),t=/filename=(.*)/.exec(i);return t.length==2?t[1]:"untitledFile.txt"}function l(n){h(n.name||"Unknown",n.message||"Unknown")}function ai(n){var i;if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(n.target.response,wt(n));else if(window.requestFileSystem){var t=n.target.response,r=t.size,u=dt;window.webkitStorageInfo.requestQuota(window.TEMPORARY,u,function(i){console.log("Granted",i);window.requestFileSystem(window.TEMPORARY,r,function(i){i.root.getFile(wt(n),{create:!0},function(n){n.createWriter(function(i){i.onwriteend=function(t){if(!t.target.error){var i=n.toURL();window.location=i}};i.onerror=function(n){l(n.target.error)};i.write(t)},l)},l)},l)},l)}else i=URL.createObjectURL(n.target.response),window.location=i}function et(){return window.navigator.msSaveBlob||window.requestFileSystem||typeof URL!="undefined"}function vi(n,t,i,r,u){var f=new XMLHttpRequest;f.open(t,n,!0);f.responseType="blob";f.upload.addEventListener("progress",yt,!1);f.addEventListener("load",r,!1);f.addEventListener("error",u,!1);f.addEventListener("abort",u,!1);f.send(i)}function ot(n,t,i,r,u){return vi(n,t,i,r,u),!1}function bt(n){n.append("<div id='progressIndicator'><\/div>");$("#progressIndicator").progressbar({value:0})}function yi(n,t){if((new XMLHttpRequest).upload){o(t);var i=n.attr("action"),r=n.get()[0],u=new FormData(r);return bt(n),ci(i,u),!1}return!0}function pi(t){a&&n.resetLocation(t);a=!1}var n={},y;n.ajaxCount=0;n.usePopupDialogs=!0;var e,d,a=!1,v="currentTransient:",kt=6e4,dt=1073741824;return n.executeAndCloseButtonQueryOnlyText="OK",n.executeWithoutClosingButtonText="Apply",n.executeAndCloseButtonDefaultText="OK",n.getDisabledSubmits=function(){return e},y=!1,n.checkForEnter=function(n){var r,t,i;return n.keyCode===13?y?(y=!1,!1):this.nodeName.toLowerCase()==="button"?(this.click(),!1):(r=$(this).closest("form"),t=r.find("button.nof-ok:first"),t.length>0)?(t.get(0).focus(),t.get(0).click(),!1):(i=r.find("button:submit:not([name]):first"),i.length>0)?(i.get(0).focus(),i.get(0).click(),!1):!0:($("form button.nof-lastClicked").removeClass("nof-lastClicked"),!0)},n.focusOnFirst=function(){var n=$("button.nof-ok:first"),t=$("button.nof-save:first"),i,r;n.length>0?(i=n.closest(".nof-actiondialog, .nof-dialog, .nof-dialog-file"),g(i)):t.length>0?(r=t.closest(".nof-objectedit"),g(r)):g()},n.clearHistory=function(){return n.ajaxCount++,$.post($(this).attr("action"),$(this).serialize(),function(n){$(".nof-history button").attr("value")&&$(".nof-history button").attr("value").split("=")[1].toLowerCase()==="true"?($(".nof-history div.nof-object").replaceWith(""),$(".nof-history > form").replaceWith($(""))):($(".nof-history div.nof-object:not(:last)").replaceWith(""),$(".nof-history div.nof-object:first").replaceWith($(".nof-history div.nof-object:first",n)),$(".nof-history button").attr("value","clearAll=False"));u(!1)}).always(function(){t()}),!1},n.clearTabbedHistory=function(){return n.ajaxCount++,$.post($(this).attr("action"),$(this).serialize(),function(n){f(n);i(n);c();u(!0)}).always(function(){t()}),!1},n.clearHistoryItem=function(){n.ajaxCount++;var r=!1,e=$(this).closest(".nof-tab");return e.hasClass("active")&&(r=!0,$.ajaxSetup({cache:!1}),n.cacheAllFormValues()),$.post($(this).attr("action"),$(this).serialize(),function(n){r?(f(n),i(n),c(),u(!0)):(w(".nof-tabbed-history",n),nt())}).fail(function(n){var t=n.responseText;t&&i(t)}).always(function(){t()}),!1},n.clearHistoryOthers=function(){n.ajaxCount++;var r=!1,e=$(this).closest(".nof-tab");return e.hasClass("active")?r=!0:($.ajaxSetup({cache:!1}),n.cacheAllFormValues()),$.post($(this).attr("action"),$(this).serialize(),function(n){r?(w(".nof-tabbed-history",n),nt()):(f(n),i(n),c(),u(!0))}).always(function(){t()}),!1},n.closeHistoryMenus=function(n,t){if(n){var i=t.find("li a");if(n.target==i.get(0)||n.target==i.get(1)||n.target==i.get(2))return!0}return $(".nof-tab").find("ul").remove(),$(document).off("mousedown"),!0},n.bindAjaxError=function(){$(".main-content").ajaxError(function(n,i,u){(r()||p())&&t();h("Ajax Error","Error in: "+u.url+" \nerror:\n"+i.responseText)})},n.redisplayInlineProperty=function(u){var e,h;return(n.ajaxCount++,e=s(u),!e||e.name!=="Redisplay")?(t(),!0):(o(e),h=$(this).serializeArray(),h[h.length]={name:e.name,value:e.value},$.post($(this).attr("action"),h,function(n){f(n);var r=$(e).closest("div.nof-property"),t=r.find("> div.nof-object"),i=$("div.nof-propertylist",n).filter(":first"),u=i.find("> form.nof-action").filter(":first"),o=r.attr("id")+"-";gt(i.find("*"),"id",o);$(e).hasClass("nof-maximize")?(t.append(u),t.append(i)):(t.find("> form.nof-action").remove(),t.find("> div.nof-propertylist").remove());rt();it()}).fail(function(n){var t=n.responseText;t&&i(t)}).always(function(){r();t()}),!1)},n.redisplayProperty=function(u){var e,h;return(n.ajaxCount++,e=s(u),!e||e.name!=="Redisplay")?(t(),!0):(o(e),h=$(this).serializeArray(),h[h.length]={name:e.name,value:e.value},$.post($(this).attr("action"),h,function(n){var r;f(n);var t=$(e).closest("div.nof-property"),u=ni(t.attr("id")),i=$(n).find("div#"+u);i.length>0?(t.replaceWith(i),r=$("input[id$='-displayFormats']:first",n).attr("value"),$("form  input[id$='-displayFormats']").attr("value",r)):$(".main-content").replaceWith($(".main-content",n));rt();it()}).fail(function(n){var t=n.responseText;t&&i(t)}).always(function(){r();t()}),!1)},n.updateTitle=function(n){var t=n.match(/<title>\s*?(.*?)\s*?<\/title>/),i=t?t[1]:"";document.title=$.trim(i)},n.getLinkFromHistory=function(n){var u=$(".main-content > div.nof-actiondialog",n).length>0,i=ct(),t=null,r;return u?$(":input[type=file]",n).length===0?t=$("div.nof-actiondialog > form",n).attr("action"):a=!0:i?t="/Transient?id="+escape(i):(t=$(".nof-history div.nof-object:last a",n).attr("href")||$(".nof-tabbed-history div.nof-tab.active a",n).attr("href")||"",r=$(".main-content > div.nof-objectedit",n).length>0,r&&(t=t.replace("/Details?","/EditObject?"))),t},n.cacheAllFormValues=function(){var t=at(),n=$("form.nof-edit, form.nof-dialog, form.nof-dialog-file");n.length&&(t||fi(),n.each(function(){var n=$(this).serializeArray();ei(n)}))},n.updateChoices=function(){function v(n){for(var i,r={},u=0,t=0;t<o.length;t++)i=o[t],i.name===n&&(r[n+u++]=i.value);return r}var i,e,u,o,f,h,c,l;if(n.ajaxCount++,i=$(this).closest("div[data-choices]"),e=i.find("select"),i.length==0||e.length==0)return t(),!0;var p=$(this).closest("form"),w=i.attr("data-choices"),a=i.attr("data-choices-parameters"),r=a.split(","),b=$.map(r,function(n){return"-encryptedField-"+n});if(!a||$.inArray($(this).attr("id"),r)===-1&&$.inArray($(this).attr("id"),b)===-1)return t(),!0;for(u={},o=p.serializeArray(),f=0;f<r.length;f++){var y=r[f],k="-encryptedField-"+y,s=v(k);if(Object.keys(s).length>0)for(h in s)u[h]=s[h];else{c=v(y);for(l in c)u[l]=c[l]}}return $.ajaxSetup({cache:!1}),$.getJSON(w,u,function(n){e.each(function(){var f=$(this).attr("id"),t,r,u,i;if(typeof n[f]!="undefined"){t=n[f][1];r=$(this).find("option");function e(){var n,i,u;if(t.length+1!=r.length)return!1;for(n=0;n<t.length;n++)if(i=$.trim(t[n].replace(/\s+/g," ")),u=$.trim(r[n+1].text.replace(/\s+/g," ")),i!=u)return!1;return!0}if(!e()){for(u=n[f][0],r.replaceWith(""),$(this).append("<option/>"),i=0;i<u.length;i++)$(this).append($("<option value='"+u[i]+"'>"+t[i]+"<\/option>"));$(this).attr("multiple")&&$(this).attr("size",u.length+1)}}})}).always(function(){t()}),!0},n.updatePageFromAction=function(e){var h=s(e),c,l;return!h||h.name==="Redisplay"?!0:$(this).find(":input[type=file]").length>0?yi($(this),h):(n.ajaxCount++,n.cacheAllFormValues(),o(h),c=$(this).serializeArray(),c[c.length]={name:h.name,value:h.value},l=$(this).attr("class").indexOf("nof-dialog")===0,$.post($(this).attr("action"),c,function(t){if(a){pi(n.getLinkFromHistory(t));return}if(f(t),h.name==="Finder"||h.name==="Selector"||h.name==="ActionAsFinder"||h.name==="InvokeActionAsFinder"||h.name==="InvokeActionAsSave"){var s=l?"nof-parameter":"nof-property",r="div."+s+":has(button[value='"+$(h).attr("value")+"'])",e=$(r).attr("id"),o=$("div#"+e,t);o.length>0?($(r).replaceWith(o),$("#"+e).find(":input").each(n.updateChoices)):i(t)}else i(t);u(!0);at()}).fail(function(n){var t=n.responseText;t&&i(t)}).always(function(){r();t()}),!1)},n.isValid=function(i,u){var f;if(n.ajaxCount++,f=u.attr("data-validate"),!f){t();return}var e=i.find("a").attr("href"),o=b(e),s={value:o};$.ajaxSetup({cache:!1});$.getJSON(f,s,function(n){if(n===!0){u.addClass("nof-validdrop");var t=$.ui.ddmanager.current;$.ui.ddmanager.prepareOffsets(t);$.each($.ui.ddmanager.droppables[t.options.scope]||[],function(){$.ui.intersect(t,this,t.options.tolerance||"intersect")&&this.element.hasClass("nof-validdrop")&&this.element.addClass("nof-withindrop")})}}).always(function(){r();t()})},n.updateOnSelect=function(){var t=$(this).closest("div.nof-property > div.nof-object"),u,f,e;t.length==0&&(t=$(this).closest("div.nof-parameter > div.nof-object"));var i=$(this).closest("div.nof-object"),o=t.find("input[data-completions]"),s=t.find("> a"),r=i.find("a"),c=r.attr("href"),l=b(c),h=i.contents().filter(function(){return this.nodeType==3}).text();o.length>0?$(o).val(h):(s.length>0?s.replaceWith(r):t.prepend(r),t.find("> a").text(h));u=t.find("> img");f=i.find("img");u.length>0?u.replaceWith(f):t.prepend(f);e=t.find("input:last");k(e,l);$(this).closest("div.nof-collection-list").remove();$(e).each(n.updateChoices)},n.updatePageFromLink=function(){return tt(),vt($(this),!0)},window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,n.getFileFromDialog=function(n){var t,i,u;return et()?(t=s(n),o(t),i=$(this).get()[0],u=new FormData(i),$(this).find(":input[type=file]").length>0&&bt($(this)),ot($(this).attr("action"),"POST",u,function(n){r();li(n)},function(n){r();ft(n)})):(h("Unsupported action","This browser does not support downloading files from a dialog"),!1)},n.getFileFromAction=function(n){if(et()){var t=s(n);return o(t),ot($(this).attr("action"),"POST",null,function(n){r();ut(n)},function(n){r();ft(n)})}return!0},n.getFileFromLink=function(){return et()?(tt(),ot($(this).attr("href"),"GET",null,function(n){p();ut(n)},function(n){p();ft(n)})):!0},n.syncPageToAddress=function(){return tt(),vt($(this),!1)},n.markedClicked=function(){return $("form button.nof-lastClicked").removeClass("nof-lastClicked"),$(this).addClass("nof-lastClicked"),!0},n.allowSubmit=function(){return $(this).closest("form").validate().cancelSubmit=!0,!0},n.resetLocation=function(n){if(n){var t=$("div.no-home-path > a").attr("href")||$("header nav a").attr("href");location.pathname!==t&&(location.href=location.protocol+"//"+location.host+t+"/#"+n)}},n}();$.address.externalChange(function(n){n.value!=="/"&&$("<a href='"+n.value+"'><\/a>").click(nakedObjects.syncPageToAddress).click()});$(window).unload(function(){nakedObjects.cacheAllFormValues()});$(window).load(function(){var t=location.href,n;return t.indexOf("#")===-1&&(n=nakedObjects.getLinkFromHistory(),nakedObjects.resetLocation(n)),!0});window.onerror=function(n,t,i){return alert("Error message: "+n+"\nURL: "+t+"\nLine Number: "+i),!0};nakedObjects.bindAjaxError();$(function(){$(document).on("click","form button",nakedObjects.markedClicked)});$(function(){$(document).on("click","form button[name=Finder], form button[name=Redisplay], form button[name=Selector], form button[name=ActionAsFinder], form button[name=InvokeActionAsFinder], form button[name=InvokeActionAsSave]",nakedObjects.allowSubmit)});$(function(){$(document).on("click","form button[title=Select]",nakedObjects.updateOnSelect)});$(function(){$(document).on("change",":input",nakedObjects.updateChoices)});$(function(){$(document).on("submit",".nof-history form",nakedObjects.clearHistory)});$(function(){$(document).on("submit",".nof-tab form:has('button.nof-clear')",nakedObjects.clearTabbedHistory)});$(function(){$(document).on("submit",".nof-tab form:has('button.nof-clear-item')",nakedObjects.clearHistoryItem)});$(function(){$(document).on("submit",".nof-tab form:has('button.nof-clear-others')",nakedObjects.clearHistoryOthers)});$(function(){$(document).on("submit","form:has(button.nof-summary), form.nof-edit",nakedObjects.redisplayProperty)});$(function(){$(document).on("submit","form:has(button.nof-maximize)",nakedObjects.redisplayInlineProperty)});$(function(){$(document).on("submit",".nof-menu form.nof-action, .nof-propertylist form.nof-action, .nof-objectedit form.nof-action, .nof-standalonetable form.nof-action, form.nof-edit, form.nof-dialog, .nof-actiondialog form.nof-action",nakedObjects.updatePageFromAction)});$(function(){$(document).on("submit","form.nof-action-file",nakedObjects.getFileFromAction)});$(function(){$(document).on("submit","form.nof-dialog-file",nakedObjects.getFileFromDialog)});$(function(){$(document).on("click","div.nof-object > a, div.nof-tab > a",nakedObjects.updatePageFromLink)});$(function(){$(document).on("click","div.nof-value > a",nakedObjects.getFileFromLink)});$(function(){$(document).on("change","#checkboxAll",function(){$("input.nof-checkbox").prop("checked",$("#checkboxAll").is(":checked"))})});$(function(){$(document).on("keydown","form :input:not(textarea)",nakedObjects.checkForEnter)});$(function(){$(document).on("contextmenu",".nof-tab",function(){return!1})});